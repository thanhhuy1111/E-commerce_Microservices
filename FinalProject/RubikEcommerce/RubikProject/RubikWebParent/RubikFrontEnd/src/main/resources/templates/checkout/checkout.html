<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:replace="fragments_front :: page_head('Rubik Front-End', 'none')">
	
</head>
<body class="animsition">
	
	<!-- Header -->
	<header th:replace="fragments_front :: header_customer"></header>

	<!-- Cart -->
	<div th:replace="fragments_front :: cart_customer"></div>

	<!-- breadcrumb -->
	<div th:replace="fragments_child_1 :: bread_crumb_product"></div>
		
	<!-- Shoping Cart -->
	<section class="bg0 p-t-75 p-b-120">
	<div class="container">
		<div class="row">
			<div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
				<div class="card">
					<div class="card-header">
						<h5>Shipping information</h5>
					</div>
								
					<div class="card-body">
						<p>
							<b>Ship to: </b>[[${shippingAddress}]]
						</p>
						<a th:href="@{/address}">Shipping to another address</a>
						
						<p>
							<b>Days to deliver: </b>[[${checkoutInfo.deliverDays}]]
						</p>
						
						<p>
							<b>Expected deliver date: </b>[[${checkoutInfo.deliverDate}]]]
						</p>
					</div>
								
				</div>
				
				<div class="card mt-5">
					<div class="card-header">
						<h5>Payment Method</h5>
					</div>
								
					<div class="card-body">
						<div>
							<form th:action="@{/place_order}" method="post">
								<p class="dis-flex flex-m ">
									<input class="mr-2" type="radio" name="paymentMethod" id="radio-COD" value="COD"/>Cash on Delivery (COD)
									&nbsp;
									<button class="btn btn-primary" id="button-COD" type="submit" style="display: none;">Place Order with COD</button>
								</p>
							</form>	
				
							<form th:action="@{/credit_card}" method="post">
								<p class="dis-flex flex-m">
									<input class="mr-2" type="radio" name="paymentMethod" id="radio-card" value="CREDIT_CARD"/>Credit Card (Mastercard/Visa)
									&nbsp;
									<div id="cardInfo" style="display: none;">
										<div class="form-group">
											<label for="cardNumber">Card Number:</label>
											<input type="text" class="form-control" id="cardNumber" name="cardNumber" placeholder="Enter card number">
											<small id="cardNumberHelp" class="form-text text-muted">We'll never share your card number with anyone else.</small>
										</div>
										<div class="form-group">
											<label for="expiryDate">Expiry Date:</label>
											<input type="text" class="form-control" id="expiryDate" name="expiryDate" placeholder="MM/YYYY">
											<small id="expiryDateHelp" class="form-text text-muted">Enter the expiry date as it appears on your card.</small>
										</div>
										<div class="form-group">
											<label for="cvv">CVV:</label>
											<input type="text" class="form-control" id="cvv" name="cvv" placeholder="CVV">
											<small id="cvvHelp" class="form-text text-muted">The 3-digit code at the back of your card.</small>
										</div>
										<img src="images/visa-card.png" alt="Visa Logo" style="width: 50px; margin-right: 10px;">
    										<!-- Logo của PayPal -->
    									<img src="images/paypal.png" alt="PayPal Logo" style="width: 50px;">
										<img src="images/mastercard.png" alt="PayPal Logo" style="width: 50px;">

									</div>
									<button class="btn btn-primary" id="button-card" type="submit" style="display: none;">Pay with Credit Card</button>
								</p>
								
							</form>
							
						</div>
					</div>
								
				</div>
			</div>
			
			<div class="col-lg-10 col-xl-5 m-lr-auto m-b-50">
				<div class="card p">
					<div class="card-header">
						<h5>Order Summary</h5>
					</div>
								
					<div class="card-body">
						<table>
							<th:block th:each="item : ${listCartItems}">
								<tr th:with="product = ${item.product}" style="vertical-align:top">
									<td class="pb-3">[[${item.quantity}]]</td>
									
									<td class="w-75 pb-3">
										<a th:href="@{'/p/' + ${product.alias}}"
											target="_blank">[[${item.product.getShortName}]]
										</a>
										<span class="label label-success"><i>Free Ship</i></span>
										<!-- <small><b>Ship Cost</b>: </small>	 -->
									</td>
									
									<td class="pb-3">
										<div th:replace="fragments :: format_number(${item.getTotalPrice})"></div>
									</td>
								</tr>
							</th:block>
							<tr>
								<td colspan="3"><hr/></td>
							</tr>
						</table>
					</div>

					<div class=" mt-3 px-4 pb-3">
					<table class="w-100">
						<tbody >
							<tr >
								<td class="pb-3">Product Total: 
								</td>
								<td class="pb-3">
									<div th:replace="fragments :: format_number(${checkoutInfo.productTotal})"></div>
								</td>
							</tr>
							<tr>
								<td >Payment Total: 
								</td>
								<td>
									<div th:replace="fragments :: format_number(${checkoutInfo.paymentTotal})"></div>
								</td>
							</tr>
						</tbody>
					</table>
						
					</div>			
				</div>
			</div>
		</div>
	</div>
	</section>


	
	<div th:replace="fragments :: modal_dialog"></div>
			
	<!-- Footer -->
	<footer th:replace="fragments_front :: footer_customer"></footer>


	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

	<div th:replace="fragments_front :: js_files_footer"></div>
	
	<script type="text/javascript">

		contextPath = "[[@{/}]]";
	
		var csrfHeaderName = "[[${_csrf.headerName}]]";
		var csrfValue = "[[${_csrf.token}]]";

		$(document).ready(function() {
			// Xử lý sự kiện khi người dùng chọn phương thức thanh toán "Cash on Delivery (COD)"
			$('#radio-COD').on('click', function() {
				// Ẩn các trường thông tin thanh toán Credit Card và hiển thị nút "Place Order with COD"
				$('#button-card').hide();
				$('#cardInfo').hide();
				$('#button-COD').show();
		
				// Thêm class 'active' vào nút Cash on Delivery (COD)
				$("#radio-card").prop('checked', false);			});
		
			// Xử lý sự kiện khi người dùng chọn phương thức thanh toán khác
			$('#radio-card').on('click', function() {
				// Ẩn nút "Place Order with COD" và hiển thị các trường thông tin thanh toán Credit Card
				$('#button-COD').hide();
				$('#button-card').show();
				$('#cardInfo').show();
		
				// Xóa class 'active' khỏi nút Cash on Delivery (COD)
				$("#radio-COD").prop('checked', false);
			});
		});
		function showModalDialog(title, message) {
			$("#modalTitle").text(title);
			$("#modalBody").text(message);
			$("#modalDialog").modal();
		}
	
		function showErrorModal(message) {
			showModalDialog("Error", message);
		}
	
		function showWarningModal(message) {
			showModalDialog("Warning", message);
		}	

	</script>
	
</body>
</html>
